import{a as k,f as $,c as We,t as ue,b as Xe}from"../chunks/Bgm4i-1x.js";import{o as Ge}from"../chunks/BGFLlG_M.js";import{h as J,C as ce,D as Je,f as ge,F as Ke,b as Qe,t as s,G as Ze,H as er,I as ke,J as pe,i as oe,K as rr,L as tr,M as we,c as ar,g as be,s as or,N as nr,O as ir,P as _e,Q as sr,R as Ce,T as lr,U as dr,V as vr,W as O,a as De,p as Ae,X as he,Y as fr,Z as ur,d as cr,q as gr,_ as pr,$ as Se,a0 as hr,x as xr,l as ne,n as br,y as Ee,B as X,z as mr,v as H,e as _r,j as u,a1 as yr,k as f,a2 as K,A as w}from"../chunks/BKD1GJOj.js";import{d as kr,s as I}from"../chunks/BHb5Aufh.js";import{i as G}from"../chunks/D94Q0doQ.js";import{h as wr}from"../chunks/DnUxGdOX.js";import{g as Ne}from"../chunks/CZjifAYM.js";import{a as Me}from"../chunks/BnJyyoW3.js";import{c as Cr,g as Er,B as xe,d as Nr}from"../chunks/Di2ZmThs.js";function Mr(e,l){return l}function Tr(e,l,a){for(var p=[],h=l.length,d,v=l.length,_=0;_<h;_++){let E=l[_];Ae(E,()=>{if(d){if(d.pending.delete(E),d.done.add(E),d.pending.size===0){var c=e.outrogroups;me(_e(d.done)),c.delete(d),c.size===0&&(e.outrogroups=null)}}else v-=1},!1)}if(v===0){var n=p.length===0&&a!==null;if(n){var x=a,i=x.parentNode;ur(i),i.append(x),e.items.clear()}me(l,!n)}else d={pending:new Set(l),done:new Set},(e.outrogroups??=new Set).add(d)}function me(e,l=!0){for(var a=0;a<e.length;a++)cr(e[a],l)}var Te;function $e(e,l,a,p,h,d=null){var v=e,_=new Map,n=(l&Se)!==0;if(n){var x=e;v=J?ce(Je(x)):x.appendChild(ge())}J&&Ke();var i=null,E=nr(()=>{var o=a();return ir(o)?o:o==null?[]:_e(o)}),c,b=!0;function T(){r.fallback=i,$r(r,c,v,l,p),i!==null&&(c.length===0?(i.f&O)===0?De(i):(i.f^=O,te(i,null,v)):Ae(i,()=>{i=null}))}var F=Qe(()=>{c=s(E);var o=c.length;let M=!1;if(J){var D=Ze(v)===er;D!==(o===0)&&(v=ke(),ce(v),pe(!1),M=!0)}for(var N=new Set,B=ar,P=or(),y=0;y<o;y+=1){J&&oe.nodeType===rr&&oe.data===tr&&(v=oe,M=!0,pe(!1));var L=c[y],R=p(L,y),m=b?null:_.get(R);m?(m.v&&we(m.v,L),m.i&&we(m.i,y),P&&B.skipped_effects.delete(m.e)):(m=Dr(_,b?v:Te??=ge(),L,R,y,h,l,a),b||(m.e.f|=O),_.set(R,m)),N.add(R)}if(o===0&&d&&!i&&(b?i=be(()=>d(v)):(i=be(()=>d(Te??=ge())),i.f|=O)),J&&o>0&&ce(ke()),!b)if(P){for(const[ie,ae]of _)N.has(ie)||B.skipped_effects.add(ae.e);B.oncommit(T),B.ondiscard(()=>{})}else T();M&&pe(!0),s(E)}),r={effect:F,items:_,outrogroups:null,fallback:i};b=!1,J&&(v=oe)}function re(e){for(;e!==null&&(e.f&fr)===0;)e=e.next;return e}function $r(e,l,a,p,h){var d=(p&hr)!==0,v=l.length,_=e.items,n=re(e.effect.first),x,i=null,E,c=[],b=[],T,F,r,o;if(d)for(o=0;o<v;o+=1)T=l[o],F=h(T,o),r=_.get(F).e,(r.f&O)===0&&(r.nodes?.a?.measure(),(E??=new Set).add(r));for(o=0;o<v;o+=1){if(T=l[o],F=h(T,o),r=_.get(F).e,e.outrogroups!==null)for(const m of e.outrogroups)m.pending.delete(r),m.done.delete(r);if((r.f&O)!==0)if(r.f^=O,r===n)te(r,null,a);else{var M=i?i.next:n;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),Y(e,i,r),Y(e,r,M),te(r,M,a),i=r,c=[],b=[],n=re(i.next);continue}if((r.f&he)!==0&&(De(r),d&&(r.nodes?.a?.unfix(),(E??=new Set).delete(r))),r!==n){if(x!==void 0&&x.has(r)){if(c.length<b.length){var D=b[0],N;i=D.prev;var B=c[0],P=c[c.length-1];for(N=0;N<c.length;N+=1)te(c[N],D,a);for(N=0;N<b.length;N+=1)x.delete(b[N]);Y(e,B.prev,P.next),Y(e,i,B),Y(e,P,D),n=D,i=P,o-=1,c=[],b=[]}else x.delete(r),te(r,n,a),Y(e,r.prev,r.next),Y(e,r,i===null?e.effect.first:i.next),Y(e,i,r),i=r;continue}for(c=[],b=[];n!==null&&n!==r;)(x??=new Set).add(n),b.push(n),n=re(n.next);if(n===null)continue}(r.f&O)===0&&c.push(r),i=r,n=re(r.next)}if(e.outrogroups!==null){for(const m of e.outrogroups)m.pending.size===0&&(me(_e(m.done)),e.outrogroups?.delete(m));e.outrogroups.size===0&&(e.outrogroups=null)}if(n!==null||x!==void 0){var y=[];if(x!==void 0)for(r of x)(r.f&he)===0&&y.push(r);for(;n!==null;)(n.f&he)===0&&n!==e.fallback&&y.push(n),n=re(n.next);var L=y.length;if(L>0){var R=(p&Se)!==0&&v===0?a:null;if(d){for(o=0;o<L;o+=1)y[o].nodes?.a?.measure();for(o=0;o<L;o+=1)y[o].nodes?.a?.fix()}Tr(e,y,R)}}d&&gr(()=>{if(E!==void 0)for(r of E)r.nodes?.a?.apply()})}function Dr(e,l,a,p,h,d,v,_){var n=(v&lr)!==0?(v&dr)===0?vr(a,!1,!1):Ce(a):null,x=(v&sr)!==0?Ce(h):null;return{v:n,i:x,e:be(()=>(d(l,n??a,x??h,_),()=>{e.delete(p)}))}}function te(e,l,a){if(e.nodes)for(var p=e.nodes.start,h=e.nodes.end,d=l&&(l.f&O)===0?l.nodes.start:a;p!==null;){var v=pr(p);if(d.before(p),p===h)return;p=v}}function Y(e,l,a){l===null?e.effect.first=a:l.next=a,a===null?e.effect.last=l:a.prev=l}var Ar=$('<div class="w-6 h-6 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"></div>'),Sr=Xe('<svg class="w-6 h-6 text-indigo-600 dark:text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>'),Hr=$('<span class="text-sm text-gray-500 dark:text-gray-400"> </span>'),Ir=$('<div class="flex items-center justify-center py-12"><div class="flex flex-col items-center gap-3"><div class="w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"></div> <span class="text-sm text-gray-500 dark:text-gray-400">Loading notes...</span></div></div>'),Fr=$('<div class="text-center py-12"><div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"><svg class="w-8 h-8 text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">No notes yet</h3> <p class="text-gray-500 dark:text-gray-400 mb-4">Create your first note to get started!</p> <!></div>'),Br=$('<span class="px-2 py-0.5 text-xs bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-full"> </span>'),Lr=$('<span class="px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-400 rounded-full"> </span>'),Rr=$('<div class="flex flex-wrap gap-1 mt-2"><!> <!></div>'),jr=$('<div class="group relative p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-indigo-500 dark:hover:border-indigo-400 hover:shadow-md transition-all cursor-pointer" role="button" tabindex="0"><button class="absolute top-2 right-2 p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg opacity-0 group-hover:opacity-100 transition-all" title="Delete note"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button> <h3 class="font-semibold text-gray-900 dark:text-white mb-1 pr-8"> </h3> <p class="text-xs text-gray-500 dark:text-gray-400"> </p> <!></div>'),zr=$('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),Vr=$('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-sm w-full shadow-xl"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Delete Note?</h3> <p class="text-gray-600 dark:text-gray-400 mb-6"> </p> <div class="flex gap-3 justify-end"><!> <!></div></div></div>'),Or=$('<div class="space-y-6"><div class="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-8 text-white shadow-lg"><h1 class="text-3xl font-bold mb-2"> </h1> <p class="text-indigo-100">Your notes are securely stored on your device and synced in real-time.</p></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"><button class="p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-indigo-500 dark:hover:border-indigo-400 hover:shadow-lg transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed"><div class="w-12 h-12 rounded-xl bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"><!></div> <h3 class="font-semibold text-gray-900 dark:text-white mb-1"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400">Start a new collaborative note</p></button> <button class="p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-purple-500 dark:hover:border-purple-400 hover:shadow-lg transition-all text-left group"><div class="w-12 h-12 rounded-xl bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"><svg class="w-6 h-6 text-purple-600 dark:text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg></div> <h3 class="font-semibold text-gray-900 dark:text-white mb-1">My Notes</h3> <p class="text-sm text-gray-500 dark:text-gray-400"> </p></button> <button class="p-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-pink-500 dark:hover:border-pink-400 hover:shadow-lg transition-all text-left group"><div class="w-12 h-12 rounded-xl bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"><svg class="w-6 h-6 text-pink-600 dark:text-pink-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <h3 class="font-semibold text-gray-900 dark:text-white mb-1">Settings</h3> <p class="text-sm text-gray-500 dark:text-gray-400">Manage your account</p></button></div> <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-gray-900 dark:text-white">My Notes</h2> <!></div> <!></div></div> <!>',1);function Qr(e,l){xr(l,!0);let a=ne(br([])),p=ne(!0),h=ne(!1),d=ne(null);Ge(async()=>{await v()});async function v(){try{H(p,!0),H(a,await Er(),!0)}catch(t){console.error("Failed to load notes:",t)}finally{H(p,!1)}}async function _(){try{H(h,!0);const t=await Cr("Untitled Note");H(a,[t,...s(a)],!0),Ne(`/app/note/${t.id}`)}catch(t){console.error("Failed to create note:",t),alert("Failed to create note. Please try again.")}finally{H(h,!1)}}function n(t){Ne(`/app/note/${t}`)}function x(t,g){g.stopPropagation(),H(d,t,!0)}async function i(){if(s(d))try{await Nr(s(d).id),H(a,s(a).filter(t=>t.id!==s(d).id),!0),H(d,null)}catch(t){console.error("Failed to delete note:",t),alert("Failed to delete note. Please try again.")}}function E(t){const g=new Date(t),A=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));return A===0?"Today":A===1?"Yesterday":A<7?`${A} days ago`:g.toLocaleDateString()}var c=Or();wr("2j7mc4",t=>{_r(()=>{yr.title="Dashboard - Locanote"})});var b=Ee(c),T=u(b),F=u(T),r=u(F);f(F),K(2),f(T);var o=w(T,2),M=u(o);M.__click=_;var D=u(M),N=u(D);{var B=t=>{var g=Ar();k(t,g)},P=t=>{var g=Sr();k(t,g)};G(N,t=>{s(h)?t(B):t(P,!1)})}f(D);var y=w(D,2),L=u(y,!0);f(y),K(2),f(M);var R=w(M,2),m=w(u(R),4),ie=u(m);f(m),f(R),K(2),f(o);var ae=w(o,2),se=u(ae),He=w(u(se),2);{var Ie=t=>{var g=Hr(),q=u(g);f(g),X(()=>I(q,`${s(a).length??""} total`)),k(t,g)};G(He,t=>{s(a).length>0&&t(Ie)})}f(se);var Fe=w(se,2);{var Be=t=>{var g=Ir();k(t,g)},Le=t=>{var g=We(),q=Ee(g);{var A=j=>{var S=Fr(),W=w(u(S),6);xe(W,{onclick:_,get disabled(){return s(h)},children:(C,U)=>{K();var z=ue();X(()=>I(z,s(h)?"Creating...":"Create Note")),k(C,z)},$$slots:{default:!0}}),f(S),k(j,S)},le=j=>{var S=zr();$e(S,21,()=>s(a),W=>W.id,(W,C)=>{var U=jr();U.__click=()=>n(s(C).id),U.__keydown=V=>V.key==="Enter"&&n(s(C).id);var z=u(U);z.__click=V=>x(s(C),V);var de=w(z,2),ze=u(de,!0);f(de);var ve=w(de,2),Ve=u(ve);f(ve);var Oe=w(ve,2);{var Pe=V=>{var fe=Rr(),ye=u(fe);$e(ye,17,()=>s(C).tags.slice(0,3),Mr,(Q,Z)=>{var ee=Br(),qe=u(ee,!0);f(ee),X(()=>I(qe,s(Z))),k(Q,ee)});var Ue=w(ye,2);{var Ye=Q=>{var Z=Lr(),ee=u(Z);f(Z),X(()=>I(ee,`+${s(C).tags.length-3}`)),k(Q,Z)};G(Ue,Q=>{s(C).tags.length>3&&Q(Ye)})}f(fe),k(V,fe)};G(Oe,V=>{s(C).tags.length>0&&V(Pe)})}f(U),X(V=>{I(ze,s(C).title),I(Ve,`Updated ${V??""}`)},[()=>E(s(C).updatedAt)]),k(W,U)}),f(S),k(j,S)};G(q,j=>{s(a).length===0?j(A):j(le,!1)},!0)}k(t,g)};G(Fe,t=>{s(p)?t(Be):t(Le,!1)})}f(ae),f(b);var Re=w(b,2);{var je=t=>{var g=Vr(),q=u(g),A=w(u(q),2),le=u(A);f(A);var j=w(A,2),S=u(j);xe(S,{variant:"ghost",onclick:()=>H(d,null),children:(C,U)=>{K();var z=ue("Cancel");k(C,z)},$$slots:{default:!0}});var W=w(S,2);xe(W,{variant:"danger",onclick:i,children:(C,U)=>{K();var z=ue("Delete");k(C,z)},$$slots:{default:!0}}),f(j),f(q),f(g),X(()=>I(le,`Are you sure you want to delete "${s(d).title??""}"? This action cannot be undone.`)),k(t,g)};G(Re,t=>{s(d)&&t(je)})}X(()=>{I(r,`Welcome back${Me.session?.username?`, ${Me.session.username}`:""}!`),M.disabled=s(h),I(L,s(h)?"Creating...":"Create Note"),I(ie,`${s(a).length??""} ${s(a).length===1?"note":"notes"}`)}),k(e,c),mr()}kr(["click","keydown"]);export{Qr as component};
