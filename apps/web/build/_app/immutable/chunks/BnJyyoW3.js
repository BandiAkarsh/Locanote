import{aV as R,d as k,g as q,e as z,h as N,O as x,aW as rr,aX as tr,aY as er,aZ as sr,t as I,a_ as ir,J as Y,a$ as ar,b0 as ur,q as fr,b1 as or,b2 as nr,b3 as lr,b4 as cr,b5 as vr,l as dr,n as hr,v as S}from"./BKD1GJOj.js";import{i as gr,c as br,d as _r,n as Ar,a as pr}from"./BHb5Aufh.js";function Sr(r,s){var t=void 0,e;R(()=>{t!==(t=s())&&(e&&(k(e),e=null),t&&(e=q(()=>{z(()=>t(r))})))})}function B(r){var s,t,e="";if(typeof r=="string"||typeof r=="number")e+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(s=0;s<i;s++)r[s]&&(t=B(r[s]))&&(e&&(e+=" "),e+=t)}else for(t in r)r[t]&&(e&&(e+=" "),e+=t);return e}function Ir(){for(var r,s,t=0,e="",i=arguments.length;t<i;t++)(r=arguments[t])&&(s=B(r))&&(e&&(e+=" "),e+=s);return e}function Nr(r){return typeof r=="object"?Ir(r):r??""}const F=[...` 	
\r\fÂ \v\uFEFF`];function yr(r,s,t){var e=r==null?"":""+r;if(t){for(var i in t)if(t[i])e=e?e+" "+i:i;else if(e.length)for(var u=i.length,o=0;(o=e.indexOf(i,o))>=0;){var a=o+u;(o===0||F.includes(e[o-1]))&&(a===e.length||F.includes(e[a]))?e=(o===0?"":e.substring(0,o))+e.substring(a+1):o=a}}return e===""?null:e}function H(r,s=!1){var t=s?" !important;":";",e="";for(var i in r){var u=r[i];u!=null&&u!==""&&(e+=" "+i+": "+u+t)}return e}function P(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Er(r,s){if(s){var t="",e,i;if(Array.isArray(s)?(e=s[0],i=s[1]):e=s,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var u=!1,o=0,a=!1,c=[];e&&c.push(...Object.keys(e).map(P)),i&&c.push(...Object.keys(i).map(P));var v=0,b=-1;const E=r.length;for(var d=0;d<E;d++){var f=r[d];if(a?f==="/"&&r[d-1]==="*"&&(a=!1):u?u===f&&(u=!1):f==="/"&&r[d+1]==="*"?a=!0:f==='"'||f==="'"?u=f:f==="("?o++:f===")"&&o--,!a&&u===!1&&o===0){if(f===":"&&b===-1)b=d;else if(f===";"||d===E-1){if(b!==-1){var y=P(r.substring(v,b).trim());if(!c.includes(y)){f!==";"&&d++;var p=r.substring(v,d).trim();t+=" "+p+";"}}v=d+1,b=-1}}}}return e&&(t+=H(e)),i&&(t+=H(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function Or(r,s,t,e,i,u){var o=r.__className;if(N||o!==t||o===void 0){var a=yr(t,e,u);(!N||a!==r.getAttribute("class"))&&(a==null?r.removeAttribute("class"):s?r.className=a:r.setAttribute("class",a)),r.__className=t}else if(u&&i!==u)for(var c in u){var v=!!u[c];(i==null||v!==!!i[c])&&r.classList.toggle(c,v)}return u}function j(r,s={},t,e){for(var i in t){var u=t[i];s[i]!==u&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,u,e))}}function Lr(r,s,t,e){var i=r.__style;if(N||i!==s){var u=Er(s,e);(!N||u!==r.getAttribute("style"))&&(u==null?r.removeAttribute("style"):r.style.cssText=u),r.__style=s}else e&&(Array.isArray(e)?(j(r,t?.[0],e[0]),j(r,t?.[1],e[1],"important")):j(r,t,e));return e}function D(r,s,t=!1){if(r.multiple){if(s==null)return;if(!x(s))return rr();for(var e of r.options)e.selected=s.includes(J(e));return}for(e of r.options){var i=J(e);if(tr(i,s)){e.selected=!0;return}}(!t||s!==void 0)&&(r.selectedIndex=-1)}function Tr(r){var s=new MutationObserver(()=>{D(r,r.__value)});s.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),er(()=>{s.disconnect()})}function J(r){return"__value"in r?r.__value:r.value}const T=Symbol("class"),w=Symbol("style"),Z=Symbol("is custom element"),G=Symbol("is html");function wr(r){if(N){var s=!1,t=()=>{if(!s){if(s=!0,r.hasAttribute("value")){var e=r.value;M(r,"value",null),r.value=e}if(r.hasAttribute("checked")){var i=r.checked;M(r,"checked",null),r.checked=i}}};r.__on_r=t,fr(t),or()}}function Cr(r,s){s?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function M(r,s,t,e){var i=W(r);N&&(i[s]=r.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&r.nodeName==="LINK")||i[s]!==(i[s]=t)&&(s==="loading"&&(r[cr]=t),t==null?r.removeAttribute(s):typeof t!="string"&&X(r).includes(s)?r[s]=t:r.setAttribute(s,t))}function Mr(r,s,t,e,i=!1,u=!1){if(N&&i&&r.tagName==="INPUT"){var o=r,a=o.type==="checkbox"?"defaultChecked":"defaultValue";a in t||wr(o)}var c=W(r),v=c[Z],b=!c[G];let d=N&&v;d&&Y(!1);var f=s||{},y=r.tagName==="OPTION";for(var p in s)p in t||(t[p]=null);t.class?t.class=Nr(t.class):t[T]&&(t.class=null),t[w]&&(t.style??=null);var E=X(r);for(const n in t){let l=t[n];if(y&&n==="value"&&l==null){r.value=r.__value="",f[n]=l;continue}if(n==="class"){var L=r.namespaceURI==="http://www.w3.org/1999/xhtml";Or(r,L,l,e,s?.[T],t[T]),f[n]=l,f[T]=t[T];continue}if(n==="style"){Lr(r,l,s?.[w],t[w]),f[n]=l,f[w]=t[w];continue}var _=f[n];if(!(l===_&&!(l===void 0&&r.hasAttribute(n)))){f[n]=l;var U=n[0]+n[1];if(U!=="$$")if(U==="on"){const A={},O="$$"+n;let h=n.slice(2);var $=pr(h);if(gr(h)&&(h=h.slice(0,-7),A.capture=!0),!$&&_){if(l!=null)continue;r.removeEventListener(h,f[O],A),f[O]=null}if(l!=null)if($)r[`__${h}`]=l,_r([h]);else{let Q=function(m){f[n].call(this,m)};f[O]=br(h,r,Q,A)}else $&&(r[`__${h}`]=void 0)}else if(n==="style")M(r,n,l);else if(n==="autofocus")ar(r,!!l);else if(!v&&(n==="__value"||n==="value"&&l!=null))r.value=r.__value=l;else if(n==="selected"&&y)Cr(r,l);else{var g=n;b||(g=Ar(g));var V=g==="defaultValue"||g==="defaultChecked";if(l==null&&!v&&!V)if(c[n]=null,g==="value"||g==="checked"){let A=r;const O=s===void 0;if(g==="value"){let h=A.defaultValue;A.removeAttribute(g),A.defaultValue=h,A.value=A.__value=O?h:null}else{let h=A.defaultChecked;A.removeAttribute(g),A.defaultChecked=h,A.checked=O?h:!1}}else r.removeAttribute(n);else V||E.includes(g)&&(v||typeof l!="string")?(r[g]=l,g in c&&(c[g]=ur)):typeof l!="function"&&M(r,g,l)}}}return d&&Y(!0),f}function kr(r,s,t=[],e=[],i=[],u,o=!1,a=!1){sr(i,t,e,c=>{var v=void 0,b={},d=r.nodeName==="SELECT",f=!1;if(R(()=>{var p=s(...c.map(I)),E=Mr(r,v,p,u,o,a);f&&d&&"value"in p&&D(r,p.value);for(let _ of Object.getOwnPropertySymbols(b))p[_]||k(b[_]);for(let _ of Object.getOwnPropertySymbols(p)){var L=p[_];_.description===ir&&(!v||L!==v[_])&&(b[_]&&k(b[_]),b[_]=q(()=>Sr(r,()=>L))),E[_]=L}v=E}),d){var y=r;z(()=>{D(y,v.value,!0),Tr(y)})}f=!0})}function W(r){return r.__attributes??={[Z]:r.nodeName.includes("-"),[G]:r.namespaceURI===nr}}var K=new Map;function X(r){var s=r.getAttribute("is")||r.nodeName,t=K.get(s);if(t)return t;K.set(s,t=[]);for(var e,i=r,u=Element.prototype;u!==i;){e=vr(i);for(var o in e)e[o].set&&t.push(o);i=lr(i)}return t}const C="locanote_session";function $r(){let r=dr(hr({status:"idle"}));function s(){if(!(typeof window>"u"))try{const a=localStorage.getItem(C);if(a){const c=JSON.parse(a);c.expiresAt>Date.now()?S(r,{status:"authenticated",session:c},!0):(localStorage.removeItem(C),S(r,{status:"unauthenticated"},!0))}else S(r,{status:"unauthenticated"},!0)}catch(a){console.error("Failed to restore session:",a),S(r,{status:"unauthenticated"},!0)}}function t(a){S(r,{status:"loading",message:a},!0)}function e(a){S(r,{status:"error",error:a},!0)}function i(a){const c={userId:a.userId,username:a.username,loggedInAt:Date.now(),expiresAt:Date.now()+6048e5};try{localStorage.setItem(C,JSON.stringify(c))}catch(v){console.error("Failed to save session:",v)}S(r,{status:"authenticated",session:c},!0)}function u(a){S(r,{status:"error",error:a.error},!0)}function o(){try{localStorage.removeItem(C)}catch(a){console.error("Failed to clear session:",a)}S(r,{status:"unauthenticated"},!0)}return{get state(){return I(r)},get isAuthenticated(){return I(r).status==="authenticated"},get isLoading(){return I(r).status==="loading"},get error(){return I(r).status==="error"?I(r).error:null},get session(){return I(r).status==="authenticated"?I(r).session:null},initialize:s,setLoading:t,setError:e,handleAuthSuccess:i,handleAuthError:u,logout:o}}const Dr=$r();export{Dr as a,Or as b,Lr as c,kr as d,wr as r,M as s};
